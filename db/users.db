-- users.db

-- Create table for users
CREATE TABLE users (
  id INTEGER PRIMARY KEY,
  username TEXT NOT NULL,
  email TEXT NOT NULL,
  password TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Create table for user preferences
CREATE TABLE preferences (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  podcast_id INTEGER,
  category_id INTEGER,
  FOREIGN KEY (user_id) REFERENCES users (id),
  FOREIGN KEY (podcast_id) REFERENCES podcasts (id),
  FOREIGN KEY (category_id) REFERENCES categories (id)
);

-- Create table for user-subscribed podcasts
CREATE TABLE subscriptions (
  user_id INTEGER NOT NULL,
  podcast_id INTEGER NOT NULL,
  PRIMARY KEY (user_id, podcast_id),
  FOREIGN KEY (user_id) REFERENCES users (id),
  FOREIGN KEY (podcast_id) REFERENCES podcasts (id)
);
